
  <ng-container>
  <mat-form-field aria-required="true" color="accent" appearance="fill" class="w-100">
    <mat-label tabindex="0" *ngIf="label" attr.for="{{config?.code}}">{{label}}</mat-label>
    <mat-label *ngIf="labelHtml" attr.for="{{config?.code}}" [innerHTML]="labelHtml | transposeHtml"></mat-label>
    <input type="text"
      [attr.aria-disabled]="disabled ? true : ( context ? (context.invalid ? true : null) : null )"
      [attr.aria-label]="formControlRef?.value ? 
      ( concatinatedMultipeSelectVal(formControlRef?.value) + ', selected ,'+placeHolder ) : 
      placeHolder "
      matInput 
      [matAutocomplete]="'auto'" 
      [placeholder]="placeHolder"
      [formControl]="localFrmControl">
  </mat-form-field>
  <mat-autocomplete *ngIf="isMultiple" #auto="matAutocomplete" (optionSelected)="onSelectionChange($event)"
    [displayWith]="displayFn.bind(this)">
    <mat-option *ngFor="let option of filteredOptions | async" [value]="selectedOptions">
      <mat-pseudo-checkbox color="primary" [state]="selectedOptions.includes(option.value) ? 'checked' : 'unchecked' ">
      </mat-pseudo-checkbox>
      <span class="ml-5 multi-select-option-text">{{option.label}}</span>
    </mat-option>
  </mat-autocomplete>
  <mat-autocomplete *ngIf="!isMultiple" #auto="matAutocomplete" (optionSelected)="singleOptionSelected($event)"
    [displayWith]="displayFn.bind(this)">
    <mat-option *ngFor="let option of filteredOptions | async" [value]="option.value">
      {{ option.label }}
    </mat-option>
  </mat-autocomplete>
</ng-container>

